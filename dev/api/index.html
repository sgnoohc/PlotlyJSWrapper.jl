<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>APIs · PlotlyJSWrapper.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PlotlyJSWrapper.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../plotstack/">Plotting HEP&#39;s Stacked Plot</a></li><li class="is-active"><a class="tocitem" href>APIs</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>APIs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>APIs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sgnoohc/PlotlyJSWrapper.jl/blob/master/docs/src/api.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Documentation"><a class="docs-heading-anchor" href="#API-Documentation">API Documentation</a><a id="API-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-Documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="PlotlyJSWrapper.plot_stack-Tuple{}" href="#PlotlyJSWrapper.plot_stack-Tuple{}"><code>PlotlyJSWrapper.plot_stack</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot_stack(; backgrounds, signals=[], data=[], options...)</code></pre><p>Create HEP-style stacked plot with Data/MC ratio in the bottom panel.  </p><p>Input arguments, <code>backgrounds</code>, <code>signals</code>, and <code>data</code>, are Arrays of <a href="https://github.com/Moelf/FHist.jl"><code>FHist.jl</code></a>&#39;s Hist1D.  </p><p>See <a href="#PlotlyJSWrapper.default_options"><code>default_options</code></a> for complete list of options.</p><p>Example usage:</p><pre><code class="language-julia hljs">plot_stack(
           backgrounds=[h1, h2, h3, h4, h5, h6],
           data=[data],
           signals=[signal], # TODO Not supported yet
           xaxistitle = &quot;Δϕ&lt;sub&gt;jj&lt;/sub&gt; [GeV]&quot;,
           outputname = &quot;plot.pdf&quot;,
           backgroundlabels = [&quot;tt̄&quot;, &quot;Higgs&quot;, &quot;Drell-Yan&quot;, &quot;tt̄Z&quot;, &quot;ZZ&quot;, &quot;VBS WW&quot;],
           signallabels = [&quot;VVH&quot;],
          )</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sgnoohc/PlotlyJSWrapper.jl/blob/2e67ee3bb88ea7aa2ba543fde414c4b4de32d2ae/src/plot_stack.jl#LL1-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PlotlyJSWrapper.default_options" href="#PlotlyJSWrapper.default_options"><code>PlotlyJSWrapper.default_options</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">default_options = Dict{Symbol, Any}</code></pre><p>Default options of all the togglable options are documented here.</p><p><strong>Output file name</strong></p><pre><code class="nohighlight hljs">:outputname =&gt; &quot;plot.pdf&quot;, # or &quot;plot.{pdf,png}&quot; or &quot;&quot;. TODO create output dir if not exist</code></pre><p><strong>Axes and labeling</strong></p><pre><code class="nohighlight hljs">:ratiotitle =&gt; &quot;Data/MC&quot;
:xaxistitle =&gt; &quot;variable [unit]&quot;
:yaxistitle =&gt; &quot;Events&quot;

:ratiotitlesize =&gt; 29</code></pre><p><strong>Axes scale and ranges</strong></p><pre><code class="nohighlight hljs">:yrange =&gt; []
:xrange =&gt; []
:ratiorange =&gt; [0, 2]
:yminclipnegative =&gt; true, # Clip minimum at 0
:ymaxscale =&gt; 1.8 # Multiplicative factor to ymax points across all histograms</code></pre><p><strong>Legend labels</strong></p><pre><code class="nohighlight hljs">:backgroundlabels =&gt; []
:signallabels =&gt; []
:datalabels =&gt; [&quot;Data&quot;]</code></pre><p><strong>Histogram colors</strong></p><pre><code class="nohighlight hljs">:datacolors =&gt; [&quot;black&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;orange&quot;, &quot;green&quot;, &quot;purple&quot;, &quot;gray&quot;]
:backgroundcolors =&gt; [4020, 4023, 4021, 4024, 2001, 6004, ... , (many more)]
:signalcolors =&gt; repeat([8001, 8002, 8003, 8004],10)
:stackedsignalopacity =&gt; 0.6 # Set the opacity of stacked signal fill</code></pre><p>Color indexs are defined in <a href="@ref">https://github.com/sgnoohc/PlotlyJSWrapper.jl/blob/main/src/colors.jl</a>.</p><p><strong>LHC Experiment related labels</strong></p><pre><code class="nohighlight hljs"># Currently only &quot;CMS&quot; label implemented
:addpreliminarylabel =&gt; true
:lumivalue =&gt; 137
:comenergy =&gt; 13</code></pre><p><strong>Extra labels settings</strong></p><pre><code class="nohighlight hljs">:totalsystlabel =&gt; [&quot;+1σ&quot;, &quot;-1σ&quot;]</code></pre><p><strong>Extra operations</strong></p><pre><code class="nohighlight hljs">:dofit =&gt; false # Scales all background such that integral is same as `data[1]` histogram
:stacksignals =&gt; false # Stacks signals on top of total background
:showsignalsinratio =&gt; false # Show signals above unity line in ratio panel
:hideratio =&gt; false # Hide the ratio panel below
:poissonerror =&gt; false # Make the data error poisson
:showtotal =&gt; true # Show total background line
:showtotallegend =&gt; true # Show total background line legend item

# To provide a custom poisson error treatment lambda
# Must be of the form where a count `x` is provided and mapped to `[upper, lower]` error
# e.g.  x -&gt; [sqrt(x+0.25)+0.5, sqrt(x+0.25)-0.5]
# default option is set to `nothing` and when not provided the above lambda will be used
:poissonerrorfunc =&gt; nothing</code></pre><p><strong>Significance (or other figure of merit) scans</strong></p><pre><code class="nohighlight hljs"># Define the &quot;figure of merit&quot;
# Following are available:
# (&quot;soverb&quot; | &quot;soversqrtb&quot; | &quot;soversqrtsplusb&quot; | &quot;llsignif&quot; | &quot;custom&quot;)
:fom =&gt; &quot;soversqrtb&quot; # Default figure of merit is S/√B

# if :fom =&gt; &quot;custom&quot; then, a custom anonymous function (lambda) must be provided
# The lambda must be of x-&gt;something format where `x` is assumed to be a struct of the following
#   struct BinInfo
#       s::Float64   # signal yield
#       se::Float64  # signal yield error
#       b::Float64   # totalbkg yield
#       be::Float64  # totalbkg yield error
#       d::Float64   # data yield
#       de::Float64  # data yield error (i.e. sqrt(N))
#       ibin::Int64  # bin index
#   end
# Below is an example of how one might provide a custom function
# e.g. User wants a custom fom defining s/sqrt(s+b+berror^2+(0.15*b)^2) (to mimic 15% systematics)
#      then a following lambda must be provided:
#
#          :customfom =&gt; x -&gt; x.s / sqrt(x.b + x.be^2 + (0.15*x.b)^2)
#
# N.B. only the first element of provided `data` histogram array can be used
#
# The default value of the option when not being used is set to
:customfom =&gt; nothing

# Three options: compute fom per bin or scan from left or right
:showfomperbin =&gt; false # Show figure of merit (fom) per bin
:showfomfromleft =&gt; false # Show fom cumulatively cut from left
:showfomfromright =&gt; false # Show fom cumulatively cut from right</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sgnoohc/PlotlyJSWrapper.jl/blob/2e67ee3bb88ea7aa2ba543fde414c4b4de32d2ae/src/options.jl#LL1-L102">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../plotstack/">« Plotting HEP&#39;s Stacked Plot</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Monday 30 August 2021 09:04">Monday 30 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
